# Docker Compose setup for running a dedicated OpenCode server
#
# This configuration provides a standalone OpenCode server that can be shared
# across multiple DRS instances or other OpenCode-based tools.
#
# For local/CLI usage, you can omit OPENCODE_SERVER and DRS will start
# an in-process server automatically.

version: '3.8'

services:
  # OpenCode Server
  opencode:
    image: anomalyco/opencode:latest
    ports:
      - "3000:3000"
    environment:
      # Set your provider API key here (Anthropic, OpenAI, ZhipuAI, etc.)
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      # Uncomment for other providers:
      # - OPENAI_API_KEY=${OPENAI_API_KEY}
      # - ZHIPU_API_KEY=${ZHIPU_API_KEY}
    volumes:
      - opencode-config:/root/.config/opencode
      - ./custom-agents:/workspace/.opencode/agent
    restart: unless-stopped

volumes:
  opencode-config:
